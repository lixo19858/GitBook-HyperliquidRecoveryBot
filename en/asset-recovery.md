# Asset Recovery Function

Asset recovery is the core function of Hyperliquid Recovery Bot, helping users safely recover digital assets from addresses flagged as high-risk.

## üéØ Function Overview

### Recovery Principle
When a Hyperliquid address is flagged as high-risk, users cannot operate through the official frontend interface. This bot helps users recover assets by directly calling Hyperliquid API, bypassing frontend restrictions.

### Recovery Process
1. **Asset Analysis**: Detect all assets in the address
2. **Smart Conversion**: Convert perpetual contract assets to spot assets
3. **Safe Withdrawal**: Withdraw assets to safe address
4. **Fee Collection**: Collect service fees proportionally

### Supported Recovery Types
- **Spot Asset Recovery**: Direct withdrawal of spot assets
- **Perpetual Contract Recovery**: Convert to spot first then withdraw
- **Mixed Asset Recovery**: Handle both spot and perpetual contract assets simultaneously

## üöÄ Usage Methods

### Starting Recovery Function
```
Method 1: Click üõ†Ô∏è Asset Recovery in main menu
Method 2: Send /recovery command
Method 3: Click [Start Recovery] on detection result page
```

### Complete Recovery Process

#### Step 1: Select Recovery Method
```
üõ†Ô∏è Asset Recovery Function

Please select operation method:
[Enter New Address] [Use Detected Address] [Select from Wallet]

üí° Suggestion: If you just completed address detection, you can directly use the detected address
```

#### Step 2: Address Confirmation
```
üìç Confirm Recovery Address

Address: 0x1234567890123456789012345678901234567890
Risk Level: High Risk
Total Asset Value: $1,234.56

Confirm using this address for recovery?
[Confirm] [Re-enter] [Cancel]
```

#### Step 3: Private Key Input
```
üîê Private Key Verification

Please enter the private key corresponding to this address (without 0x prefix):

‚ö†Ô∏è Security Tips:
‚Ä¢ Private key is only used for asset recovery operations
‚Ä¢ Will be immediately cleaned after operation completion
‚Ä¢ Please ensure input in secure environment
‚Ä¢ Do not screenshot or copy private key elsewhere

Private key format example:
1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef

[Enter Private Key] [Cancel Operation]
```

#### Step 4: Private Key Verification
```
üîç Verifying private key...

‚úÖ Private key format verification passed
‚úÖ Private key matches address confirmed
‚úÖ Account access permission verification passed

Continuing with asset analysis...
```

#### Step 5: Asset Analysis
```
üìä Analyzing assets...

üîç Detected the following assets:

Spot Assets:
‚Ä¢ USDC: 500.00 ($500.00)
‚Ä¢ ETH: 0.5 ($734.56)
‚Ä¢ BTC: 0.001 ($45.00)

Perpetual Contracts (Perp):
‚Ä¢ USDC Margin: 200.00 ($200.00)
‚Ä¢ ETH-USD Position: 0.1 ETH (needs closing)
‚Ä¢ Unrealized PnL: +$15.50

üí∞ Total Asset Value: $1,495.06
üîÑ Assets needing conversion: $215.50 (Perpetual contracts)
```

#### Step 6: Recovery Plan Confirmation
```
üìã Asset Recovery Plan

üéØ Recovery Strategy: Fully Automated Recovery
üí∞ Total Asset Value: $1,495.06
üè¶ Service Fee (0.5%): $7.48
üíµ Expected Receipt: $1,487.58

üìù Execution Steps:
1. ‚úÖ Asset analysis complete
2. üîÑ Close perpetual contract positions
3. üîÑ Transfer perpetual contract margin to spot
4. üîÑ Withdraw all spot assets
5. üîÑ Collect service fee
6. üîÑ Clean temporary data

‚è±Ô∏è Estimated execution time: 3-8 minutes
üéØ Target address: Will automatically generate safe address

‚ö†Ô∏è Important Notes:
‚Ä¢ Operation cannot be cancelled once started
‚Ä¢ Please ensure stable network connection
‚Ä¢ Recommended to operate in good network environment

Confirm execution of recovery operation?
[Confirm Recovery] [Modify Plan] [Cancel Operation]
```

#### Step 7: Execute Recovery
```
üöÄ Starting recovery operation execution...

Step 1/5: Prepare recovery environment
‚úÖ Initialize recovery parameters
‚úÖ Verify network connection
‚úÖ Check account status

Step 2/5: Handle perpetual contracts
üîÑ Closing ETH-USD position...
‚úÖ ETH-USD position closing complete
üîÑ Transferring margin to spot account...
‚úÖ Margin transfer complete

Step 3/5: Withdraw spot assets
üîÑ Withdrawing USDC (715.50)...
‚úÖ USDC withdrawal complete (TxHash: 0xabc...123)
üîÑ Withdrawing ETH (0.6)...
‚úÖ ETH withdrawal complete (TxHash: 0xdef...456)
üîÑ Withdrawing BTC (0.001)...
‚úÖ BTC withdrawal complete (TxHash: 0x789...abc)

Step 4/5: Collect service fee
üîÑ Collecting service fee...
‚úÖ Service fee collection complete ($7.48)

Step 5/5: Cleanup and confirmation
‚úÖ Clean temporary data
‚úÖ Verify all transactions
‚úÖ Generate recovery report

üéâ Recovery operation complete!
```

#### Step 8: Recovery Results
```
‚úÖ Asset recovery successful!

üìä Recovery Summary:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Recovery Details                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Source Address: 0x1234...7890   ‚îÇ
‚îÇ Target Address: 0x5678...1234   ‚îÇ
‚îÇ Recovery Time: 2024-01-15 14:35:42 ‚îÇ
‚îÇ Execution Duration: 4 min 23 sec ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

üí∞ Recovered Asset Details:
‚Ä¢ USDC: 708.02 (original 715.50 - service fee 7.48)
‚Ä¢ ETH: 0.6 (original 0.5 + position closing profit 0.1)
‚Ä¢ BTC: 0.001

üßæ Fee Details:
‚Ä¢ Total Asset Value: $1,495.06
‚Ä¢ Service Fee Rate: 0.5%
‚Ä¢ Service Fee Amount: $7.48
‚Ä¢ Network Transaction Fees: Included in service fee

üîó Transaction Records:
‚Ä¢ USDC Withdrawal: 0xabc...123 ‚úÖ Confirmed
‚Ä¢ ETH Withdrawal: 0xdef...456 ‚úÖ Confirmed
‚Ä¢ BTC Withdrawal: 0x789...abc ‚úÖ Confirmed

üì± Follow-up Operations:
[View Target Address] [Download Recovery Report] [Return to Main Menu]

Thank you for using Hyperliquid Recovery Bot!
Your assets have been safely transferred to the new address.
```

## üí∞ Fee Structure Details

### Service Fee Calculation
- **Base Rate**: 0.5% (calculated based on total recovery asset value)
- **Minimum Fee**: 1 USDC
- **Maximum Fee**: 100,000,000 USDC

### Fee Calculation Examples
```
Example 1: Recovery amount $100
Service fee = max($100 √ó 0.5%, $1) = $1.00

Example 2: Recovery amount $1,000
Service fee = $1,000 √ó 0.5% = $5.00

Example 3: Recovery amount $10,000
Service fee = $10,000 √ó 0.5% = $50.00

Example 4: Recovery amount $1,000,000
Service fee = $1,000,000 √ó 0.5% = $5,000.00
```

### Fee Includes
- **Recovery Service Fee**: Asset recovery operation fee
- **Network Transaction Fees**: Blockchain transaction fees
- **Technical Service Fee**: Technical support and maintenance fee
- **Risk Guarantee Fee**: Operation risk guarantee fee

### Fee Collection Method
- **Automatic Deduction**: Automatically deducted from recovered assets
- **Priority**: USDC > ETH > BTC > Other tokens
- **Transparent Billing**: All fees clearly displayed before operation
- **No Hidden Fees**: No additional fees charged

## üîí Security Guarantee

### Private Key Security
```
üîê Private Key Security Measures:

1. Encrypted Storage:
   ‚Ä¢ Use AES-256 encryption algorithm
   ‚Ä¢ Randomly generate encryption keys
   ‚Ä¢ Temporary storage in memory

2. Access Control:
   ‚Ä¢ Only used during recovery process
   ‚Ä¢ Strict permission control
   ‚Ä¢ Operation log recording

3. Automatic Cleanup:
   ‚Ä¢ Immediate cleanup after operation completion
   ‚Ä¢ Memory data overwriting
   ‚Ä¢ No persistent storage
```

### Operation Security
```
üõ°Ô∏è Operation Security Mechanisms:

1. Multi-layer Verification:
   ‚Ä¢ Address format verification
   ‚Ä¢ Private key matching verification
   ‚Ä¢ Asset status verification

2. Risk Control:
   ‚Ä¢ Operation amount limits
   ‚Ä¢ Frequency limit control
   ‚Ä¢ Abnormal behavior detection

3. Rollback Mechanism:
   ‚Ä¢ Automatic rollback on operation failure
   ‚Ä¢ Partial success status handling
   ‚Ä¢ Error recovery mechanism
```

### Asset Security
```
üíé Asset Security Guarantee:

1. Target Address:
   ‚Ä¢ Automatically generate safe address
   ‚Ä¢ User can specify target address
   ‚Ä¢ Address validity verification

2. Transaction Confirmation:
   ‚Ä¢ Wait for block confirmation
   ‚Ä¢ Transaction status monitoring
   ‚Ä¢ Failure retry mechanism

3. Asset Tracking:
   ‚Ä¢ Complete operation records
   ‚Ä¢ Transaction hash records
   ‚Ä¢ Asset flow tracking
```

## ‚ö†Ô∏è Important Notes

### Pre-Operation Preparation
1. **Network Environment**: Ensure stable network connection
2. **Device Security**: Operate on secure devices
3. **Private Key Preparation**: Ensure private key is correct and available
4. **Time Arrangement**: Reserve sufficient operation time

### During Operation
1. **Don't Close**: Don't close Telegram during operation
2. **Maintain Connection**: Keep network connection stable
3. **Don't Interfere**: Don't perform other blockchain operations
4. **Be Patient**: Some steps may take longer time

### Post-Operation Confirmation
1. **Check Results**: Carefully check recovery results
2. **Verify Transactions**: Verify transactions in blockchain explorer
3. **Save Records**: Save important transaction records
4. **Security Cleanup**: Clean related sensitive information

## üîß Advanced Options

### Custom Target Address
```
üéØ Target Address Settings

Current Setting: Auto-generate safe address

Options:
[Use Auto-generated Address] [Specify Target Address] [Select from Wallet]

If choosing to specify target address:
Please enter target address: 0x...

‚ö†Ô∏è Note: Please ensure target address is safe and controlled by you
```

### Batch Recovery
```
üì¶ Batch Recovery Settings

Current Asset Value: $10,000
Recommended Batch Quantity: 2 batches

Batch Plan:
Batch 1: $5,000 (USDC + ETH)
Batch 2: $5,000 (BTC + Others)

Advantages:
‚Ä¢ Reduce single operation risk
‚Ä¢ Improve operation success rate
‚Ä¢ Facilitate asset management

[Use Batch Recovery] [One-time Recovery]
```

### Recovery Plan Customization
```
‚öôÔ∏è Recovery Plan Customization

Standard Plan: Fully Automated Recovery (Recommended)
Custom Plan: Manually select recovery steps

Custom Options:
‚òëÔ∏è Close perpetual contract positions
‚òëÔ∏è Transfer margin to spot
‚òëÔ∏è Withdraw spot assets
‚òëÔ∏è Collect service fee

Advanced Options:
‚ñ° Retain partial assets
‚ñ° Specify withdrawal order
‚ñ° Set slippage protection

[Use Standard Plan] [Custom Plan]
```

## üìä Recovery Statistics

### Personal Recovery Records
```
üìà My Recovery Records

Total Recovery Count: 3 times
Total Recovery Amount: $15,678.90
Total Service Fees: $78.39
Average Recovery Time: 4 min 32 sec

Recent Recoveries:
1. 2024-01-15 - $1,495.06 ‚úÖ Success
2. 2024-01-10 - $8,234.50 ‚úÖ Success
3. 2024-01-05 - $5,949.34 ‚úÖ Success

[View Details] [Download Report]
```

### System Recovery Statistics
```
üåê System Statistics

Today's Recovery:
‚Ä¢ Recovery Count: 156 times
‚Ä¢ Recovery Amount: $2,345,678.90
‚Ä¢ Success Rate: 99.2%

Historical Statistics:
‚Ä¢ Total Recovery Count: 12,345 times
‚Ä¢ Total Recovery Amount: $123,456,789.01
‚Ä¢ Average Recovery Amount: $10,003.45
```

## üÜò Troubleshooting

### Common Issues and Solutions

#### Q: Private Key Verification Failed
```
‚ùå Possible Causes:
1. Incorrect private key format (contains 0x prefix)
2. Private key doesn't match address
3. Incorrect private key length

‚úÖ Solutions:
1. Check private key format (64-bit hexadecimal)
2. Confirm private key corresponds to correct address
3. Re-enter private key
```

#### Q: Recovery Operation Failed
```
‚ùå Possible Causes:
1. Unstable network connection
2. Hyperliquid API temporarily unavailable
3. Abnormal account status

‚úÖ Solutions:
1. Check network connection
2. Retry operation later
3. Contact technical support
```

#### Q: Partial Asset Recovery Failed
```
‚ùå Possible Causes:
1. Some assets are currently in use
2. Network congestion causing transaction failure
3. Insufficient asset balance to pay fees

‚úÖ Solutions:
1. Check asset status
2. Wait for network recovery and retry
3. Ensure sufficient balance to pay fees
```

### Emergency Contact
If you encounter serious problems, please contact technical support immediately:
- **Bot Feedback**: Use the bot's feedback function
- **Emergency Situation**: Describe problems and operation steps in detail
- **Provide Information**: Address, time, error information, etc.
