# 资产恢复功能

![Version](https://img.shields.io/badge/version-2.6.0-green)
![Last Updated](https://img.shields.io/badge/last%20updated-2025--01-brightgreen)

资产恢复是 Hyperliquid Recovery Bot 的核心功能，帮助用户从 Hyperliquid 地址中安全地恢复数字资产。

## 🎯 功能概述

### 机器人做什么？
机器人自动帮您从 Hyperliquid 地址恢复所有资产：
- 将您的所有代币转换为 USDC
- 关闭任何开仓持仓
- 将所有资产提现到您的安全地址

当您的地址被标记无法访问官方 Hyperliquid 界面时，这特别有用。

### 7步恢复流程

机器人遵循标准化的 7 步流程：

**步骤 1: 转换现货资产**
- 卖出现货账户中的所有非 USDC 代币（ETH、BTC 等）
- 全部转换为 USDC

**步骤 2: 转移到永续账户**
- 将所有 USDC 从现货账户转移到永续账户
- 此内部转账无需手续费

**步骤 3: 平仓永续持仓**
- 关闭您所有的永续合约持仓
- 转换为 USDC

**步骤 4: 提取金库资产**
- 从金库提取资产（如果有）
- 跳过锁定的资产（需要等待解锁期）

**步骤 5: 处理质押资产**
- 解除质押您的 HYPE 代币（如果有）
- 注意：需要 1 天 + 7 天等待期
- 可能需要多次运行恢复

**步骤 6: 收取服务费**
- 机器人收取 0.5% 服务费（最低 1 USDC）

**步骤 7: 最终提现**
- 将剩余 USDC 提现到您的目标地址
- 1 USDC Hyperliquid 平台费用

### 支持的资产类型

✅ **现货资产**
- USDC、ETH、BTC 等代币
- 自动转换为 USDC

✅ **永续合约**
- 多头/空头持仓
- 自动平仓并转换为 USDC

✅ **金库资产**
- 存放在金库中的资产
- 如果未锁定则提取
- 如果在锁定期内则跳过

✅ **质押资产**
- 质押给验证者的 HYPE 代币
- 需要等待期：1 天（解除质押）+ 7 天（提现）
- 可能需要运行恢复 2-3 次

## 🚀 使用方法

### 启动恢复功能
```
方法一: 点击主菜单 🛠️ 资产恢复
方法二: 发送 /recovery 命令
方法三: 在检测结果页面点击 [开始恢复]
```

### 完整恢复流程

#### 步骤 1: 进入恢复中心
```
� 资产恢复中心

智能资产恢复系统，提供安全可靠的资产找回服务。

✨ 功能特点：
• 自动资产检测与分析
• 安全恢复流程执行
• 支持所有 Hyperliquid 资产类型

💡 工作原理：
1. 输入要恢复资产的地址
2. 系统分析可用资产
3. 提供私钥或助记词进行安全恢复
4. 自动执行恢复流程

点击下方按钮开始资产恢复

[� 自动恢复] [⬅️ 返回]
```

#### 步骤 2: 输入地址
点击"自动恢复"后，系统会提示输入地址：
```
💬 请输入用于恢复分析的 Hyperliquid 地址：
```

#### 步骤 3: 资产分析
```
📊 正在分析资产...

🔍 检测到的资产:
• 现货账户: 3 个资产 ($750.00)
• 永续合约账户: 2 个资产 ($485.06)
• 总价值: $1,235.06

📋 恢复计划:
1. 清算现货账户所有非 USDC 资产 → USDC
2. 整合所有现货 USDC → 转移至永续合约账户
3. 清算永续合约账户所有非 USDC 资产 → USDC
4. 执行统一提现 → 所有 USDC 至 Arbitrum

💰 服务费: $6.18 (0.5%)
💵 净恢复金额: $1,228.88

[继续] [取消]
```

#### 步骤 4: 私钥输入
```
🔐 私钥验证

请输入此地址的私钥:

⚠️ 安全提示:
• 私钥仅用于恢复操作
• 完成后自动从内存中清除
• 确保您处于安全环境中
• 切勿分享或截图您的私钥

格式: 64 位十六进制字符（可带或不带 0x 前缀）
示例: 1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef

[输入私钥]
[输入助记词]
[取消]
```

**提示**: 您可以选择使用私钥或助记词进行恢复。

**如果选择输入助记词**:
```
📝 输入助记词

请输入您的助记词以开始恢复流程。

📝 格式要求:
• 12 或 24 个单词，用空格分隔
• 示例: word1 word2 word3 ... word12

⚠️ 安全提示:
• 确保在安全环境中操作
• 切勿分享或截图您的助记词

格式: 12 或 24 个单词，用空格分隔
示例: abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about

[输入助记词]
[取消]
```

#### 步骤 5: 凭证验证
```
🔍 正在验证凭证...

✅ 凭证格式有效
✅ 地址匹配确认
✅ 账户访问验证通过

继续执行恢复...
```

#### 步骤 6: 恢复执行

**示例1: 仅现货资产**
```
🚀 正在执行恢复计划...

阶段 1/3: 现货账户清算
🔄 将现货账户中的 ETH 转换为 USDC...
✅ ETH → USDC 转换: 0.5 ETH → 734.56 USDC
🔄 将现货账户中的 BTC 转换为 USDC...
✅ BTC → USDC 转换: 0.001 BTC → 45.00 USDC
✅ 现货账户清算完成: 总计 1,279.56 USDC

阶段 2/3: 转移到期货账户
🔄 将所有 USDC 转移: 现货 → 期货账户...
✅ 转移完成: 1,279.56 USDC 已转移至期货账户

阶段 3/3: 提现
🔄 从期货账户提现 USDC 到 Arbitrum...
💰 扣除服务费: 6.40 USDC (0.5%)
✅ 提现完成: 1,273.16 USDC 已转移

🎉 恢复成功完成！
```

**示例2: 混合资产（现货+期货）**
```
🚀 正在执行恢复计划...

阶段 1/4: 现货账户清算
🔄 将现货账户中的 ETH 转换为 USDC...
✅ ETH → USDC 转换: 0.3 ETH → 440.74 USDC
✅ 现货账户清算完成: 总计 940.74 USDC

阶段 2/4: 转移到期货账户
🔄 将所有 USDC 转移: 现货 → 期货账户...
✅ 转移完成: 940.74 USDC 已转移至期货账户

阶段 3/4: 期货账户清算
🔄 平仓 ETH-USD 永续持仓...
✅ 持仓平仓完成: +0.2 ETH 已实现
🔄 将已实现的 ETH 转换为 USDC...
✅ ETH → USDC 转换: 0.2 ETH → 294.12 USDC
✅ 期货账户清算完成: 总计 1,234.86 USDC

阶段 4/4: 提现
🔄 从期货账户提现 USDC 到 Arbitrum...
💰 扣除服务费: 6.17 USDC (0.5%)
✅ 提现完成: 1,228.69 USDC 已转移

🎉 恢复成功完成！
```

#### 步骤 6: 恢复结果
```
✅ 资产恢复完成

📊 执行摘要：
• 总步骤：7
• 已完成步骤：7
• 恢复金额：1487.58 USDC
• 实际费用：9.48 USDC
- 服务费：7.48 USDC
- 提现手续费：2.00 USDC

[返回菜单]
```

## 💰 费用结构详解

### 费用是多少？

**服务费**
- 总资产价值的 0.5%
- 最低: 1 USDC

**提现手续费**（Hyperliquid 平台）
- 总计 2 USDC（2 次提现 × 每次 1 USDC）

### 快速计算示例

| 您的资产价值 | 服务费 (0.5%) | 提现手续费 | 总费用 | 您实际收到 |
|-------------|--------------|-----------|--------|-----------|
| $100 | $1 | $2 | **$3** | **$97** |
| $1,000 | $5 | $2 | **$7** | **$993** |
| $10,000 | $50 | $2 | **$52** | **$9,948** |
| $100,000 | $500 | $2 | **$502** | **$99,498** |

### 费用包含什么？

✅ **服务费包含**:
- 所有资产转换（ETH、BTC 等 → USDC）
- 所有账户转移（现货 → 永续）
- 所有区块链交易费用
- 技术支持

✅ **提现手续费**:
- 第一次提现：1 USDC（收取服务费）
- 第二次提现：1 USDC（提现您的资产）
- 这是 Hyperliquid 平台收取的费用

### 费用如何收取？

1. **自动计算**: 机器人自动计算总费用
2. **提前显示**: 开始恢复前清楚显示
3. **自动扣除**: 在提现步骤中自动扣除
4. **一次性**: 无隐藏费用，无额外收费



## 🔒 安全保障

### 您的私钥是安全的

🔐 **从不保存**
- 私钥从不写入磁盘或数据库
- 仅在恢复期间存储在内存中
- 完成后自动删除

🔐 **仅用于签名**
- 私钥仅用于签署交易
- 从不发送到外部服务器
- 所有操作在官方 Hyperliquid 网络上

🔐 **您可以验证**
- 每笔交易都有哈希
- 在区块链浏览器上检查
- 完全透明

### 操作安全

✅ **地址验证**
- 操作前检查地址格式
- 验证私钥与地址匹配

✅ **交易确认**
- 每步在继续前确认
- 网络故障时自动重试

✅ **错误处理**
- 优雅处理失败
- 详细的错误消息
- 需要时提供支持

## ⚠️ 重要提示

### 开始恢复前

1. ✅ **检查网络**: 确保互联网连接稳定
2. ✅ **安全环境**: 在私密环境中操作
3. ✅ **准备私钥**: 确保有正确的私钥

### 恢复期间

1. ⏳ **保持连接**: 不要关闭 Telegram
2. ⏳ **避免干扰**: 不要在同一地址进行其他操作
3. ⏳ **关注进度**: 注意机器人的消息
4. ⏳ **保持耐心**: 等待所有步骤完成

### 恢复完成后

1. ✅ **验证交易**: 在 Arbitrum 浏览器上检查
2. ✅ **确认到账**: 检查资金是否到达
3. ✅ **保存记录**: 保留交易哈希
4. ✅ **私钥已删除**: 自动从内存中清除

## ⚠️ 特殊情况说明

### 质押资产（Staked Assets）

如果您有质押的 HYPE 代币，恢复需要更长时间：

**时间线**:
1. **第一次运行**: 机器人解除质押您的 HYPE
   - ⏱️ 需要等待 **1 天**（24 小时）

2. **第二次运行**: 1 天后，机器人将 HYPE 提现到永续账户
   - ⏱️ 需要等待 **7 天**

3. **第三次运行**: 7 天后，机器人将 HYPE 转换为 USDC 并提现

**重要提示**:
- ✅ 您需要运行恢复 **2-3 次**
- ✅ 机器人会告诉您何时再次运行
- ✅ 其他资产（现货、永续）在第一次运行时恢复

### 金库资产（Vault Assets）

如果您有金库资产：

**未锁定的金库**:
- ✅ 机器人自动提取
- ✅ 与其他资产一起恢复

**锁定的金库**:
- ⏸️ 机器人跳过锁定的资产
- ⏸️ 您需要等待锁定期结束
- ⏸️ 锁定期结束后再次运行恢复

### 小额资产

如果您的资产价值很小：

**低于 $5**:
- ⚠️ 可能不值得恢复（费用 $3）
- ⚠️ 机器人会警告您

**示例**:
- 资产 $4 → 费用 $3 → 您收到 $1
- 资产 $10 → 费用 $3 → 您收到 $7

### 支持的网络

- **源网络**: Hyperliquid（主网或测试网）
- **目标网络**: Arbitrum One（主网）或 Arbitrum Sepolia（测试网）
- **提现币种**: 仅 USDC（所有资产转换为 USDC）

## ❓ 常见问题（FAQ）

### 1. 恢复需要多长时间？
- 现货和永续资产：通常较快完成
- 质押资产：需要 1 天 + 7 天等待期

### 2. 我的私钥安全吗？
🔒 **是的，完全安全**
- 从不保存到任何数据库
- 仅在恢复期间使用
- 完成后自动删除

### 3. 费用是多少？
💰 **服务费 0.5% + 提现费 2 USDC**
- 示例：恢复 $1,000 → 支付 $7 → 收到 $993

### 4. 我可以恢复哪些资产？
✅ **4 种资产类型**
- 现货资产（USDC、ETH、BTC 等）
- 永续合约持仓
- 金库资产（如果未锁定）
- 质押资产（需要等待期）

### 5. 如果我有质押的 HYPE 怎么办？
⏳ **需要多次运行**
- 第一次：解除质押（等待 1 天）
- 第二次：提现到永续账户（等待 7 天）
- 第三次：转换为 USDC 并提现

### 6. 金库资产被锁定怎么办？
🔒 **机器人会跳过锁定的资产**
- 等待锁定期结束
- 然后再次运行恢复

### 7. 资产价值太小值得恢复吗？
⚠️ **取决于金额**
- 低于 $5：可能不值得（费用 $3）
- 高于 $10：值得恢复

### 8. 如果恢复失败怎么办？
🔄 **机器人会自动重试**
- 网络问题：自动重试
- 如果持续失败：联系支持

### 9. 我可以选择目标地址吗？
✅ **是的**
- 您可以指定任何 Arbitrum 地址
- 或使用源地址

### 10. 恢复后我会收到什么？
💵 **USDC（在 Arbitrum 网络上）**
- 所有资产转换为 USDC
- 扣除费用后提现到您的地址

---

## 🆘 需要帮助？

如果您遇到问题：

1. **检查 FAQ**: 大多数问题在上面已解答
2. **联系支持**: 通过机器人发送反馈
3. **提供详情**: 包括地址和错误消息
4. **交易哈希**: 如果有，提供交易哈希以便查询


